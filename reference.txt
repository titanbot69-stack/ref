        # Cooldown enforcement: block if a Certification Request for this employee exists within last 15 days
        employee_email = hrms_row.get("business_email")
        fifteen_days_ago = timezone.now() - timezone.timedelta(days=15)
        with connection.cursor() as cursor:
            cursor.execute(
                """
                SELECT event_id, assigned_at
                FROM event_status
                WHERE event_type = %s
                  AND event_description LIKE %s
                  AND assigned_at >= %s
                ORDER BY assigned_at DESC
                LIMIT 1
                """,
                [ 'Certification Request', f'%{employee_email}%', fifteen_days_ago ]
            )
            recent = cursor.fetchone()
        if recent:
            msg = 'A certification request was already initiated for this user within the last 15 days.'
            if is_ajax:
                return JsonResponse({'success': False, 'error': msg, 'cooldown': True})
            return redirect('dashboard')  # Non-AJAX simple redirect (messaging system not implemented)





            event_description=f'Certification requested for {employee_email}',
